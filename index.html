<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Tour 360° Casa - 6 ambientes</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body, html { margin:0; padding:0; height:100%; overflow:hidden; background:#000; font-family:Arial,sans-serif; }
        #panorama { width:100%; height:100%; }

        /* Selector elegante - siempre visible, incluso en fullscreen */
        .scene-selector {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.75);
            border-radius: 12px;
            padding: 10px 16px;
            color: white;
            z-index: 9999;           /* ← siempre arriba de todo */
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.5);
            transition: opacity 0.4s;
        }
        .scene-selector button {
            background: none;
            border: none;
            color: white;
            font-size: 28px;
            cursor: pointer;
            padding: 0 8px;
        }
        .scene-selector select {
            background: rgba(255,255,255,0.15);
            color: white;
            border: none;
            padding: 10px 14px;
            border-radius: 8px;
            font-size: 16px;
            min-width: 220px;
        }
        .scene-selector select option { background:#111; }
    </style>
    <link rel="stylesheet" href="https://cdn.pannellum.org/2.5/pannellum.css"/>
    <script src="https://cdn.pannellum.org/2.5/pannellum.js"></script>
</head>
<body>
    <div id="panorama"></div>

    <!-- Selector que NUNCA se superpone ni desaparece -->
    <div class="scene-selector" id="selector">
        <button onclick="prevScene()">Previous</button>
        <select id="sceneSelect" onchange="loadScene(this.value)"></select>
        <button onclick="nextScene()">Next</button>
    </div>

    <script>
        const scenes = {
            m1: { title: "1. Ingreso",          panorama: "https://raw.githubusercontent.com/jomviz/panoramas360/main/m1.jpg" },
            m2: { title: "2. Cocina / Comedor", panorama: "https://raw.githubusercontent.com/jomviz/panoramas360/main/m2.jpg" },
            m3: { title: "3. Estudio",          panorama: "https://raw.githubusercontent.com/jomviz/panoramas360/main/m3.jpg" },
            m4: { title: "4. Patio",            panorama: "https://raw.githubusercontent.com/jomviz/panoramas360/main/m4.jpg" },
            m5: { title: "5. Terraza",          panorama: "https://raw.githubusercontent.com/jomviz/panoramas360/main/m5.jpg" },
            m6: { title: "6. Sala de juegos",   panorama: "https://raw.githubusercontent.com/jomviz/panoramas360/main/m6.jpg" }
        };

        let current = 'm1';
        let viewer = null;

        function loadScene(id) {
            current = id;
            const config = {
                default: { firstScene: id, sceneFadeDuration: 800, autoLoad: true },
                showTitle: false,          /* ← QUITA el cartel abajo a la izquierda */
                showFullscreenCtrl: true,
                scenes: {}
            };

            Object.keys(scenes).forEach(key => {
                config.scenes[key] = {
                    title: scenes[key].title,
                    type: "equirectangular",
                    panorama: scenes[key].panorama,
                    hotSpots: []
                };
                // HotSpots (ajustalos cuando lo veas en vivo)
                if (key === "m1") { /* Ingreso */
                    config.scenes[key].hotSpots.push({ pitch: 0, yaw: 0, type: "scene", text: "Cocina / Comedor", sceneId: "m2" });
                }
                if (key === "m2") config.scenes[key].hotSpots.push({ pitch: 0, yaw: 180, type: "scene", text: "Ingreso", sceneId: "m1" });
                if (key === "m3") config.scenes[key].hotSpots.push({ pitch: 0, yaw: 180, type: "scene", text: "Cocina", sceneId: "m2" });
                if (key === "m4") config.scenes[key].hotSpots.push({ pitch: 0, yaw: 0, type: "scene", text: "Ingreso", sceneId: "m1" });
                if (key === "m5") config.scenes[key].hotSpots.push({ pitch: -10, yaw: 90, type: "scene", text: "Patio", sceneId: "m4" });
                if (key === "m6") config.scenes[key].hotSpots.push({ pitch: 0, yaw: -90, type: "scene", text: "Terraza", sceneId: "m5" });
            });

            if (viewer) viewer.destroy();
            viewer = pannellum.viewer('panorama', config);
            document.getElementById('sceneSelect').value = id;
        }

        function nextScene() {
            const order = Object.keys(scenes);
            const i = order.indexOf(current);
            loadScene(order[(i + 1) % order.length]);
        }
        function prevScene() {
            const order = Object.keys(scenes);
            const i = order.indexOf(current);
            loadScene(order[(i - 1 + order.length) % order.length]);
        }

        // Llenar el select
        window.onload = () => {
            const sel = document.getElementById('sceneSelect');
            Object.keys(scenes).forEach(id => {
                const opt = document.createElement('option');
                opt.value = id;
                opt.textContent = scenes[id].title;
                sel.appendChild(opt);
            });
            loadScene('m1');
        };
    </script>
</body>
</html>
